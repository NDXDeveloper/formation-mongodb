üîù Retour au [Sommaire](/SOMMAIRE.md)

# 2.5.5 replaceOne()

## Introduction

Nous avons vu les quatre op√©rations CRUD fondamentales : Create, Read, Update et Delete. D√©couvrons maintenant **replaceOne()**, une m√©thode qui se situe entre Update et Delete : elle **remplace compl√®tement** un document.

> **üí° Diff√©rence cl√© :** Alors que `updateOne()` **modifie** certains champs, `replaceOne()` **remplace enti√®rement** le document (sauf l'_id).

Dans cette section, nous allons explorer :
- Comment remplacer un document avec `replaceOne()`
- La diff√©rence entre `replaceOne()` et `updateOne()`
- Quand utiliser l'un ou l'autre
- Les pr√©cautions √† prendre
- Les cas d'usage appropri√©s

---

## Qu'est-ce que replaceOne() ?

### Concept

**replaceOne()** supprime toutes les donn√©es d'un document et les remplace par un nouveau document complet.

**Analogie :**
- `updateOne()` = **corriger** des mots dans un texte
- `replaceOne()` = **r√©√©crire** tout le texte

### Ce qui est Conserv√©

**Seul l'`_id` est conserv√©.** Tout le reste est remplac√©.

---

## Syntaxe de Base

```javascript
db.collection.replaceOne(filtre, nouveau_document, options)
```

**Param√®tres :**
- `filtre` : Crit√®res pour trouver le document √† remplacer
- `nouveau_document` : Le nouveau document complet (sans op√©rateurs comme $set)
- `options` : Options facultatives (upsert, collation, etc.)

**Retour :**
```javascript
{
  acknowledged: true,
  matchedCount: 1,     // Nombre de documents correspondants
  modifiedCount: 1,    // Nombre de documents modifi√©s
  upsertedId: null     // ID si upsert
}
```

---

## Premier Exemple

### Document Original

```javascript
// Document actuel
{
  _id: ObjectId("507f1f77bcf86cd799439011"),
  nom: "Dupont",
  prenom: "Jean",
  age: 30,
  email: "jean.dupont@example.com",
  ville: "Paris"
}
```

### Remplacement

```javascript
// Remplacer le document
db.utilisateurs.replaceOne(
  { _id: ObjectId("507f1f77bcf86cd799439011") },
  {
    nom: "Martin",
    email: "pierre.martin@example.com",
    age: 25
  }
)
```

### Document Apr√®s Remplacement

```javascript
{
  _id: ObjectId("507f1f77bcf86cd799439011"),  // _id conserv√©
  nom: "Martin",
  email: "pierre.martin@example.com",
  age: 25
  // prenom et ville ont DISPARU !
}
```

**‚ö†Ô∏è Important :** Les champs `prenom` et `ville` ont √©t√© **supprim√©s** car ils n'√©taient pas dans le nouveau document.

---

## Diff√©rence avec updateOne()

### Comparaison Visuelle

**Document original :**
```javascript
{
  _id: 1,
  nom: "Dupont",
  prenom: "Jean",
  age: 30,
  ville: "Paris"
}
```

### Avec updateOne() + $set

```javascript
db.utilisateurs.updateOne(
  { _id: 1 },
  { $set: { age: 31, ville: "Lyon" } }
)

// R√©sultat : Modification partielle
{
  _id: 1,
  nom: "Dupont",      // Conserv√©
  prenom: "Jean",     // Conserv√©
  age: 31,            // Modifi√©
  ville: "Lyon"       // Modifi√©
}
```

### Avec replaceOne()

```javascript
db.utilisateurs.replaceOne(
  { _id: 1 },
  { age: 31, ville: "Lyon" }
)

// R√©sultat : Remplacement complet
{
  _id: 1,            // Seul l'_id est conserv√©
  age: 31,
  ville: "Lyon"
  // nom et prenom ont DISPARU !
}
```

### Tableau Comparatif

| Aspect | updateOne() | replaceOne() |
|--------|-------------|--------------|
| **Op√©ration** | Modification partielle | Remplacement complet |
| **Champs non mentionn√©s** | Conserv√©s | Supprim√©s ‚ùå |
| **Op√©rateurs** | Obligatoires ($set, $inc, etc.) | Interdits ‚ùå |
| **_id** | Conserv√© ‚úÖ | Conserv√© ‚úÖ |
| **Usage** | Modifications courantes | R√©√©criture compl√®te |

---

## Syntaxe : Diff√©rences Importantes

### ‚ùå Erreur Fr√©quente avec replaceOne()

```javascript
// ‚ùå ERREUR : Pas d'op√©rateurs avec replaceOne()
db.utilisateurs.replaceOne(
  { _id: 1 },
  { $set: { nom: "Martin" } }  // ‚ùå $set interdit !
)
// Erreur : The replacement document must not contain atomic operators
```

### ‚úÖ Syntaxe Correcte

```javascript
// ‚úÖ Correct : Document complet sans op√©rateurs
db.utilisateurs.replaceOne(
  { _id: 1 },
  {
    nom: "Martin",
    prenom: "Pierre",
    age: 25,
    email: "pierre.martin@example.com"
  }
)
```

---

## Cas d'Usage de replaceOne()

### 1. Reconstruction Compl√®te d'un Document

**Quand vous voulez un document compl√®tement nouveau :**

```javascript
// Ancienne version d'un profil utilisateur
{
  _id: 1,
  username: "john_old",
  email_old: "old@example.com",
  settings_v1: { theme: "light" },
  deprecated_field: "data"
}

// Nouvelle version compl√®te
db.utilisateurs.replaceOne(
  { _id: 1 },
  {
    nom: "John Doe",
    email: "john.doe@example.com",
    preferences: {
      theme: "dark",
      langue: "fr"
    },
    dateMAJ: new Date()
  }
)
```

### 2. Migration de Sch√©ma

**Passer d'un ancien format √† un nouveau :**

```javascript
// Ancien format
{
  _id: 1,
  firstName: "Jean",
  lastName: "Dupont",
  mail: "jean@example.com"
}

// Nouveau format
db.utilisateurs.replaceOne(
  { _id: 1 },
  {
    nom: {
      prenom: "Jean",
      famille: "Dupont"
    },
    contact: {
      email: "jean@example.com"
    },
    version: 2
  }
)
```

### 3. Simplification d'un Document Complexe

**Nettoyer un document avec trop de champs obsol√®tes :**

```javascript
// Document encombr√©
{
  _id: 1,
  nom: "Produit",
  // 50 champs dont 40 obsol√®tes...
}

// Version nettoy√©e
db.produits.replaceOne(
  { _id: 1 },
  {
    nom: "Produit",
    prix: 99.99,
    stock: 10,
    actif: true
  }
)
```

### 4. R√©initialisation de Donn√©es

**Remettre un document √† z√©ro :**

```javascript
// R√©initialiser les statistiques d'un utilisateur
db.utilisateurs.replaceOne(
  { _id: ObjectId("...") },
  {
    nom: "Dupont",
    email: "dupont@example.com",
    statistiques: {
      connexions: 0,
      derniereVisite: null,
      vuesPage: 0
    }
  }
)
```

---

## Quand Utiliser Quoi ?

### Utilisez updateOne() quand :

‚úÖ **Vous modifiez quelques champs**
```javascript
db.users.updateOne(
  { _id: 1 },
  { $set: { age: 31 } }
)
```

‚úÖ **Vous voulez conserver les autres champs**
```javascript
db.users.updateOne(
  { _id: 1 },
  { $inc: { vues: 1 } }
)
```

‚úÖ **Vous utilisez des op√©rateurs** ($inc, $push, etc.)
```javascript
db.users.updateOne(
  { _id: 1 },
  { $push: { tags: "nouveau" } }
)
```

### Utilisez replaceOne() quand :

‚úÖ **Vous reconstruisez compl√®tement le document**
```javascript
db.users.replaceOne(
  { _id: 1 },
  { nom: "Nouveau", email: "nouveau@example.com" }
)
```

‚úÖ **Vous migrez vers un nouveau sch√©ma**
```javascript
// Ancien ‚Üí Nouveau format
db.users.replaceOne(
  { _id: 1 },
  nouveauFormatComplet
)
```

‚úÖ **Vous nettoyez des champs obsol√®tes**
```javascript
db.users.replaceOne(
  { _id: 1 },
  versionNettoyee
)
```

‚úÖ **Vous avez d√©j√† le document complet √† enregistrer**
```javascript
let userComplet = {
  nom: "Martin",
  email: "martin@example.com",
  preferences: { ... }
}

db.users.replaceOne({ _id: 1 }, userComplet)
```

---

## Pr√©cautions Importantes

### ‚ö†Ô∏è Perte de Donn√©es

**Le plus grand risque : perdre des champs par erreur.**

```javascript
// Document original
{
  _id: 1,
  nom: "Dupont",
  email: "dupont@example.com",
  adresse: { ... },
  historique: [ ... ],
  preferences: { ... }
}

// ‚ùå Remplacement qui oublie des champs
db.utilisateurs.replaceOne(
  { _id: 1 },
  { nom: "Dupont", email: "nouveau@example.com" }
)
// R√©sultat : adresse, historique et preferences PERDUS !
```

### ‚úÖ Bonnes Pratiques

**1. R√©cup√©rer d'abord le document complet :**

```javascript
// 1. R√©cup√©rer l'actuel
let user = db.utilisateurs.findOne({ _id: 1 })

// 2. V√©rifier ce que vous avez
print(JSON.stringify(user, null, 2))

// 3. Modifier localement
user.email = "nouveau@example.com"
user.dateMAJ = new Date()

// 4. Remplacer
delete user._id  // Retirer l'_id du document de remplacement
db.utilisateurs.replaceOne({ _id: 1 }, user)
```

**2. Utiliser updateOne() par d√©faut :**

```javascript
// ‚úÖ Pr√©f√©rez updateOne() pour modifications simples
db.users.updateOne(
  { _id: 1 },
  { $set: { email: "nouveau@example.com" } }
)

// ‚ö†Ô∏è replaceOne() seulement si vraiment n√©cessaire
```

**3. V√©rifier le r√©sultat :**

```javascript
let resultat = db.utilisateurs.replaceOne(
  { _id: 1 },
  nouveauDocument
)

if (resultat.matchedCount === 0) {
  print("Document non trouv√©")
} else if (resultat.modifiedCount === 0) {
  print("Aucun changement (document identique)")
} else {
  print("Document remplac√© avec succ√®s")
}
```

---

## Option : upsert

### Fonctionnement

**Comme avec updateOne(), replaceOne() supporte l'option upsert :**

```javascript
db.utilisateurs.replaceOne(
  { email: "nouveau@example.com" },
  {
    nom: "Nouveau",
    email: "nouveau@example.com",
    dateCreation: new Date()
  },
  { upsert: true }
)
```

**Comportement :**
- Si le document existe ‚Üí il est remplac√©
- Si le document n'existe pas ‚Üí il est cr√©√©

### Exemple avec upsert

```javascript
// Tentative 1 : Document n'existe pas
db.produits.replaceOne(
  { sku: "PROD-999" },
  {
    sku: "PROD-999",
    nom: "Nouveau Produit",
    prix: 29.99
  },
  { upsert: true }
)

// R√©sultat : Document cr√©√©
{
  acknowledged: true,
  matchedCount: 0,
  modifiedCount: 0,
  upsertedId: ObjectId("...")  // Nouveau document cr√©√©
}

// Tentative 2 : Document existe maintenant
db.produits.replaceOne(
  { sku: "PROD-999" },
  {
    sku: "PROD-999",
    nom: "Produit Mis √† Jour",
    prix: 39.99
  },
  { upsert: true }
)

// R√©sultat : Document remplac√©
{
  acknowledged: true,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedId: null  // Pas de cr√©ation
}
```

---

## Exemples Pratiques

### Configuration Utilisateur

```javascript
// Remplacer compl√®tement les pr√©f√©rences
db.utilisateurs.replaceOne(
  { _id: ObjectId("...") },
  {
    nom: "Dupont",
    email: "dupont@example.com",
    preferences: {
      theme: "dark",
      langue: "fr",
      notifications: {
        email: true,
        push: false,
        sms: false
      },
      affichage: {
        elementsParPage: 20,
        triParDefaut: "date_desc"
      }
    },
    version: 2
  }
)
```

### Cache / Session

```javascript
// Remplacer compl√®tement une session
db.sessions.replaceOne(
  { sessionId: "abc123" },
  {
    sessionId: "abc123",
    userId: ObjectId("..."),
    data: {
      panier: [ ... ],
      navigation: [ ... ]
    },
    expireAt: new Date(Date.now() + 3600000),  // 1h
    derniereActivite: new Date()
  },
  { upsert: true }
)
```

### Document de Configuration

```javascript
// Remplacer la configuration de l'application
db.configuration.replaceOne(
  { type: "app_settings" },
  {
    type: "app_settings",
    version: "2.0",
    features: {
      nouveauDashboard: true,
      ancienneInterface: false,
      modeDebug: false
    },
    limites: {
      uploadsParJour: 100,
      tailleMaxFichier: 10485760  // 10 Mo
    },
    dateMAJ: new Date()
  },
  { upsert: true }
)
```

---

## Manipulation de l'_id

### ‚ö†Ô∏è Impossible de Modifier l'_id

```javascript
// ‚ùå Erreur : Tenter de changer l'_id
db.utilisateurs.replaceOne(
  { _id: 1 },
  {
    _id: 2,  // ‚ùå Interdit !
    nom: "Martin"
  }
)
// Erreur : After applying the update, the (immutable) field '_id' was found to have been altered
```

### ‚úÖ L'_id est Automatiquement Conserv√©

```javascript
// ‚úÖ Correct : Ne pas inclure _id dans le remplacement
db.utilisateurs.replaceOne(
  { _id: 1 },
  {
    nom: "Martin",
    email: "martin@example.com"
  }
)
// L'_id reste √† 1
```

### Pr√©paration d'un Document pour Remplacement

```javascript
// Si vous avez r√©cup√©r√© un document avec son _id
let user = db.utilisateurs.findOne({ email: "test@example.com" })

// Modifier le document
user.nom = "Nouveau Nom"
user.dateMAJ = new Date()

// Retirer l'_id avant de remplacer
let userId = user._id
delete user._id

// Remplacer
db.utilisateurs.replaceOne({ _id: userId }, user)
```

---

## Patterns Courants

### Pattern : R√©cup√©rer-Modifier-Remplacer

```javascript
function mettreAJourUtilisateur(userId, modifications) {
  // 1. R√©cup√©rer le document actuel
  let user = db.utilisateurs.findOne({ _id: userId })

  if (!user) {
    print("Utilisateur non trouv√©")
    return false
  }

  // 2. Appliquer les modifications
  Object.assign(user, modifications)

  // 3. Ajouter metadata
  user.dateModification = new Date()
  user.version = (user.version || 0) + 1

  // 4. Retirer l'_id
  delete user._id

  // 5. Remplacer
  let resultat = db.utilisateurs.replaceOne(
    { _id: userId },
    user
  )

  return resultat.modifiedCount === 1
}

// Utilisation
mettreAJourUtilisateur(
  ObjectId("..."),
  { nom: "Nouveau Nom", email: "nouveau@example.com" }
)
```

### Pattern : Migration de Sch√©ma

```javascript
function migrerUtilisateurs() {
  let cursor = db.utilisateurs.find({ version: { $ne: 2 } })

  cursor.forEach(user => {
    // Transformer vers le nouveau format
    let nouveauFormat = {
      nom: {
        prenom: user.firstName || user.prenom,
        famille: user.lastName || user.nom
      },
      contact: {
        email: user.email || user.mail,
        telephone: user.phone || user.tel
      },
      version: 2,
      dateMigration: new Date()
    }

    // Remplacer
    db.utilisateurs.replaceOne(
      { _id: user._id },
      nouveauFormat
    )

    print(`Migr√© : ${user._id}`)
  })
}

// Ex√©cuter la migration
migrerUtilisateurs()
```

---

## Gestion des Erreurs

### V√©rifier l'Existence

```javascript
let resultat = db.utilisateurs.replaceOne(
  { _id: ObjectId("...") },
  nouveauDocument
)

if (resultat.matchedCount === 0) {
  print("‚ùå Document non trouv√©")
} else if (resultat.modifiedCount === 0) {
  print("‚ö†Ô∏è Document trouv√© mais aucun changement")
} else {
  print("‚úÖ Document remplac√© avec succ√®s")
}
```

### Try-Catch

```javascript
try {
  let resultat = db.utilisateurs.replaceOne(
    { _id: ObjectId("...") },
    {
      nom: "Martin",
      email: "martin@example.com",
      dateMAJ: new Date()
    }
  )

  if (resultat.modifiedCount === 1) {
    print("Remplacement r√©ussi")
  }

} catch (e) {
  print("Erreur lors du remplacement : " + e.message)

  if (e.message.includes("immutable field '_id'")) {
    print("Vous avez tent√© de modifier l'_id !")
  }
}
```

---

## Bonnes Pratiques

### ‚úÖ √Ä Faire

1. **Pr√©f√©rer updateOne() par d√©faut**
   ```javascript
   // ‚úÖ Pour la plupart des cas
   db.users.updateOne({ _id: 1 }, { $set: { age: 31 } })

   // ‚ö†Ô∏è replaceOne() seulement si n√©cessaire
   db.users.replaceOne({ _id: 1 }, documentComplet)
   ```

2. **R√©cup√©rer le document avant de remplacer**
   ```javascript
   let doc = db.collection.findOne({ _id: id })
   // Modifier doc
   delete doc._id
   db.collection.replaceOne({ _id: id }, doc)
   ```

3. **Documenter les remplacements**
   ```javascript
   db.users.replaceOne(
     { _id: 1 },
     {
       // ... nouveau document
       dateRemplacement: new Date(),
       raison: "Migration vers nouveau format"
     }
   )
   ```

4. **V√©rifier le r√©sultat**
   ```javascript
   let result = db.users.replaceOne(...)
   if (result.modifiedCount === 0) {
     // G√©rer le cas d'√©chec
   }
   ```

5. **Utiliser pour migrations de sch√©ma**
   ```javascript
   // Cas id√©al pour replaceOne()
   db.users.replaceOne(
     { _id: 1, version: 1 },
     nouveauFormatV2
   )
   ```

### ‚ùå √Ä √âviter

1. **Utiliser replaceOne() pour modifications simples**
   ```javascript
   // ‚ùå Mauvais : replaceOne() pour changer un champ
   let user = db.users.findOne({ _id: 1 })
   user.age = 31
   delete user._id
   db.users.replaceOne({ _id: 1 }, user)

   // ‚úÖ Bon : updateOne()
   db.users.updateOne({ _id: 1 }, { $set: { age: 31 } })
   ```

2. **Oublier de retirer l'_id**
   ```javascript
   // ‚ùå Erreur
   let doc = db.collection.findOne({ _id: 1 })
   db.collection.replaceOne({ _id: 1 }, doc)  // Erreur !

   // ‚úÖ Correct
   let doc = db.collection.findOne({ _id: 1 })
   delete doc._id
   db.collection.replaceOne({ _id: 1 }, doc)
   ```

3. **Perdre des champs importants**
   ```javascript
   // ‚ùå Dangereux : perte de donn√©es
   db.users.replaceOne(
     { _id: 1 },
     { nom: "Martin" }  // Tout le reste dispara√Æt !
   )

   // ‚úÖ V√©rifier d'abord
   let user = db.users.findOne({ _id: 1 })
   // S'assurer que tout est pr√©sent
   ```

4. **Utiliser des op√©rateurs**
   ```javascript
   // ‚ùå Erreur
   db.users.replaceOne(
     { _id: 1 },
     { $set: { nom: "Martin" } }  // Interdit !
   )

   // ‚úÖ Correct (utilisez updateOne() √† la place)
   db.users.updateOne(
     { _id: 1 },
     { $set: { nom: "Martin" } }
   )
   ```

---

## Comparaison : updateOne vs replaceOne

### Cas Pratique Compar√©

**Sc√©nario :** Mettre √† jour l'email d'un utilisateur

**Document :**
```javascript
{
  _id: 1,
  nom: "Dupont",
  prenom: "Jean",
  email: "jean@example.com",
  age: 30,
  adresse: { ... },
  preferences: { ... }
}
```

**Avec updateOne() :**
```javascript
db.utilisateurs.updateOne(
  { _id: 1 },
  { $set: { email: "nouveau@example.com" } }
)

// R√©sultat : Seulement l'email change
{
  _id: 1,
  nom: "Dupont",
  prenom: "Jean",
  email: "nouveau@example.com",  // Modifi√©
  age: 30,
  adresse: { ... },               // Conserv√©
  preferences: { ... }            // Conserv√©
}
```

**Avec replaceOne() :**
```javascript
db.utilisateurs.replaceOne(
  { _id: 1 },
  { email: "nouveau@example.com" }
)

// R√©sultat : Tout dispara√Æt sauf _id et email
{
  _id: 1,
  email: "nouveau@example.com"
  // nom, prenom, age, adresse, preferences PERDUS !
}
```

**Conclusion :** Pour ce cas, **updateOne()** est clairement le meilleur choix.

---

## Comparaison avec SQL

### SQL

En SQL, il n'y a pas d'√©quivalent direct de `replaceOne()`. On utilise UPDATE :

```sql
-- Mise √† jour partielle
UPDATE utilisateurs
SET email = 'nouveau@example.com'
WHERE id = 1;

-- Pour "remplacer", il faut supprimer puis ins√©rer
DELETE FROM utilisateurs WHERE id = 1;
INSERT INTO utilisateurs (id, nom, email) VALUES (1, 'Martin', 'martin@example.com');
```

### MongoDB

```javascript
// Mise √† jour partielle
db.utilisateurs.updateOne(
  { _id: 1 },
  { $set: { email: "nouveau@example.com" } }
)

// Remplacement
db.utilisateurs.replaceOne(
  { _id: 1 },
  { nom: "Martin", email: "martin@example.com" }
)
```

**Avantage MongoDB :** replaceOne() est atomique et conserve l'_id automatiquement.

---

## Points Cl√©s √† Retenir

### ‚úÖ Essentiel

1. **replaceOne()** remplace **tout** le document (sauf _id)
2. **Pas d'op√©rateurs** : Pas de $set, $inc, etc.
3. **_id conserv√©** : Impossible de le modifier
4. **Perte de donn√©es** : Les champs non mentionn√©s disparaissent
5. **Cas d'usage limit√©s** : Migrations, reconstructions compl√®tes
6. **updateOne() pr√©f√©rable** : Pour la majorit√© des modifications

### üéØ Syntaxe √† Retenir

```javascript
// replaceOne - Document complet
db.collection.replaceOne(
  { _id: id },
  {
    champ1: "valeur1",
    champ2: "valeur2"
    // Tous les champs n√©cessaires
  }
)

// updateOne - Modification partielle (pr√©f√©rable)
db.collection.updateOne(
  { _id: id },
  { $set: { champ1: "valeur1" } }
)
```

### ‚ö†Ô∏è R√®gles d'Or

1. **updateOne() par d√©faut**, replaceOne() seulement si n√©cessaire
2. **Toujours retirer _id** du document de remplacement
3. **V√©rifier le document complet** avant de remplacer
4. **Attention √† la perte de donn√©es** (champs oubli√©s)
5. **Pas d'op√©rateurs** avec replaceOne()

---

## Quand Vraiment Utiliser replaceOne() ?

**Cas l√©gitimes :**
- ‚úÖ Migration de sch√©ma structurel complet
- ‚úÖ Reconstruction totale d'un document corrompu
- ‚úÖ Nettoyage de documents avec trop de champs obsol√®tes
- ‚úÖ Remplacement de cache/session complet
- ‚úÖ Vous avez d√©j√† un document complet pr√™t √† sauvegarder

**Cas o√π updateOne() est meilleur :**
- ‚úÖ Modifier 1 ou plusieurs champs (99% des cas)
- ‚úÖ Ajouter un champ
- ‚úÖ Incr√©menter un compteur
- ‚úÖ Modifier un tableau
- ‚úÖ Modifier un champ imbriqu√©

**R√®gle simple :** Si vous h√©sitez, utilisez **updateOne()** !

---

## Conclusion

**replaceOne()** est une m√©thode sp√©cialis√©e qui a sa place dans des cas bien sp√©cifiques. Pour la plupart de vos besoins, **updateOne()** sera plus appropri√© et plus s√ªr.

**Vous ma√Ætrisez maintenant toutes les op√©rations CRUD + replaceOne() !** üéâ

---

## Prochaines √âtapes

Maintenant que vous ma√Ætrisez les op√©rations de base, explorons des concepts plus avanc√©s :

‚û°Ô∏è **2.6 Le shell MongoDB (mongosh)** : Ma√Ætriser l'outil en ligne de commande

Les op√©rations CRUD sont compl√®tes. Bravo ! üöÄ

---

## Ressources Compl√©mentaires

### Documentation Officielle

- [replaceOne() - MongoDB Manual](https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/)
- [Update vs Replace](https://docs.mongodb.com/manual/tutorial/update-documents/)
- [Atomicity and Transactions](https://docs.mongodb.com/manual/core/write-operations-atomicity/)

### Pour Aller Plus Loin

- findOneAndReplace() : remplacer et retourner le document
- Bulk replace operations
- Transactions pour garantir la coh√©rence

---


‚è≠Ô∏è [Le shell MongoDB (mongosh)](/02-fondamentaux-de-mongodb/06-shell-mongosh.md)
