üîù Retour au [Sommaire](/SOMMAIRE.md)

# 2.5.1 insertOne() et insertMany()

## Introduction

L'insertion de documents est la premi√®re op√©ration CRUD que vous devez ma√Ætriser dans MongoDB. C'est l'√©quivalent de l'instruction `INSERT` en SQL, mais avec une syntaxe plus simple et plus flexible.

> **üí° Rappel :** Dans MongoDB, vous ins√©rez des **documents** (objets JSON) dans des **collections** (√©quivalent des tables SQL).

Dans cette section, nous allons explorer :
- Comment ins√©rer un seul document avec `insertOne()`
- Comment ins√©rer plusieurs documents avec `insertMany()`
- Les options disponibles
- La gestion des erreurs
- Les bonnes pratiques

---

## insertOne() : Ins√©rer un Seul Document

### Syntaxe de Base

```javascript
db.collection.insertOne(document, options)
```

**Param√®tres :**
- `document` : Le document √† ins√©rer (objet JavaScript)
- `options` : Options facultatives (nous les verrons plus tard)

**Retour :**
- Un objet contenant l'`_id` du document ins√©r√©

### Premier Exemple Simple

```javascript
// S√©lectionner la base de donn√©es
use blog

// Ins√©rer un article
db.articles.insertOne({
  titre: "Introduction √† MongoDB",
  auteur: "Jean Dupont",
  contenu: "MongoDB est une base de donn√©es NoSQL...",
  datePublication: new Date(),
  publie: true
})
```

**R√©sultat :**
```javascript
{
  acknowledged: true,
  insertedId: ObjectId("6565d7d8f2a3b4c5d6e7f8a9")
}
```

**Explication du r√©sultat :**
- `acknowledged: true` : L'op√©ration a r√©ussi
- `insertedId` : L'identifiant unique g√©n√©r√© automatiquement

### G√©n√©ration Automatique de l'_id

**MongoDB g√©n√®re automatiquement un `_id` si vous ne le sp√©cifiez pas :**

```javascript
// Sans _id (recommand√©)
db.utilisateurs.insertOne({
  nom: "Martin",
  email: "martin@example.com"
})
// MongoDB g√©n√®re automatiquement un ObjectId

// R√©sultat
{
  acknowledged: true,
  insertedId: ObjectId("6565d7d8f2a3b4c5d6e7f8aa")
}
```

### Sp√©cifier un _id Personnalis√©

**Vous pouvez aussi sp√©cifier votre propre `_id` :**

```javascript
// Avec _id personnalis√© (entier)
db.produits.insertOne({
  _id: 1,
  nom: "Laptop",
  prix: 999.99
})

// Avec _id personnalis√© (cha√Æne)
db.produits.insertOne({
  _id: "PROD-001",
  nom: "Souris",
  prix: 29.99
})

// Avec _id personnalis√© (UUID)
db.produits.insertOne({
  _id: UUID(),
  nom: "Clavier",
  prix: 79.99
})
```

**‚ö†Ô∏è Attention :** L'`_id` doit √™tre **unique** dans la collection !

```javascript
// ‚ùå Erreur : Doublon d'_id
db.produits.insertOne({
  _id: 1,
  nom: "Autre produit"
})
// Erreur : E11000 duplicate key error
```

---

## Exemples d'insertOne() par Type de Donn√©es

### Document Simple

```javascript
db.clients.insertOne({
  nom: "Sophie Bernard",
  email: "sophie.bernard@example.com",
  telephone: "0612345678",
  dateInscription: new Date()
})
```

### Document avec Nombres

```javascript
db.commandes.insertOne({
  numeroCommande: "CMD-2024-001",
  montantTotal: 159.99,
  quantiteArticles: 3,
  tva: 31.99,
  fraisLivraison: 5.00
})
```

### Document avec Tableau

```javascript
db.livres.insertOne({
  titre: "Apprendre MongoDB",
  auteurs: ["Alice Martin", "Bob Dupont"],
  genres: ["Informatique", "Base de donn√©es", "NoSQL"],
  isbn: "978-1234567890",
  prix: 39.99
})
```

### Document avec Sous-Document Imbriqu√©

```javascript
db.employes.insertOne({
  nom: "Claire Durand",
  poste: "D√©veloppeuse",
  adresse: {
    rue: "15 Avenue des Champs",
    ville: "Paris",
    codePostal: "75008",
    pays: "France"
  },
  contact: {
    email: "claire.durand@entreprise.com",
    telephone: {
      bureau: "0145678901",
      mobile: "0623456789"
    }
  }
})
```

### Document avec Types Sp√©ciaux

```javascript
db.transactions.insertOne({
  reference: "TXN-2024-1234",
  montant: NumberDecimal("1299.99"),  // D√©cimal pr√©cis
  devise: "EUR",
  timestamp: ISODate("2024-12-01T14:30:00Z"),  // Date ISO
  statut: "completee",
  metadata: {
    ip: "192.168.1.1",
    userAgent: "Mozilla/5.0..."
  }
})
```

---

## insertMany() : Ins√©rer Plusieurs Documents

### Syntaxe de Base

```javascript
db.collection.insertMany([document1, document2, ...], options)
```

**Param√®tres :**
- `[documents]` : Tableau de documents √† ins√©rer
- `options` : Options facultatives

**Retour :**
- Un objet contenant les `_id` de tous les documents ins√©r√©s

### Exemple Simple

```javascript
db.produits.insertMany([
  {
    nom: "Laptop Pro",
    prix: 1299.99,
    stock: 15
  },
  {
    nom: "Souris Gaming",
    prix: 49.99,
    stock: 50
  },
  {
    nom: "Clavier M√©canique",
    prix: 89.99,
    stock: 30
  }
])
```

**R√©sultat :**
```javascript
{
  acknowledged: true,
  insertedIds: {
    '0': ObjectId("6565d7d8f2a3b4c5d6e7f8ab"),
    '1': ObjectId("6565d7d8f2a3b4c5d6e7f8ac"),
    '2': ObjectId("6565d7d8f2a3b4c5d6e7f8ad")
  }
}
```

**Explication :**
- `'0'`, `'1'`, `'2'` : Index dans le tableau
- Chaque document re√ßoit son propre `ObjectId`

### Insertion de Nombreux Documents

```javascript
// Cr√©er un tableau de 100 utilisateurs
let utilisateurs = []
for (let i = 1; i <= 100; i++) {
  utilisateurs.push({
    nom: `Utilisateur${i}`,
    email: `user${i}@example.com`,
    age: 18 + Math.floor(Math.random() * 50),
    dateInscription: new Date()
  })
}

// Ins√©rer tous les utilisateurs d'un coup
db.utilisateurs.insertMany(utilisateurs)
```

**R√©sultat :**
```javascript
{
  acknowledged: true,
  insertedIds: {
    '0': ObjectId("..."),
    '1': ObjectId("..."),
    // ... 98 autres IDs
    '99': ObjectId("...")
  }
}
```

---

## Comparaison insertOne() vs insertMany()

### Performance

| Aspect | insertOne() | insertMany() |
|--------|-------------|--------------|
| **Documents** | 1 seul | Plusieurs |
| **Requ√™tes r√©seau** | 1 par document | 1 pour tous |
| **Performance** | ‚ùå Lente pour multiples | ‚úÖ Rapide |
| **Utilisation m√©moire** | Faible | Plus √©lev√©e |

### Exemple de Comparaison

**‚ùå Inefficace (multiple insertOne) :**
```javascript
// 1000 requ√™tes r√©seau = LENT !
for (let i = 0; i < 1000; i++) {
  db.logs.insertOne({
    message: `Log ${i}`,
    timestamp: new Date()
  })
}
```

**‚úÖ Efficace (insertMany) :**
```javascript
// 1 seule requ√™te r√©seau = RAPIDE !
let logs = []
for (let i = 0; i < 1000; i++) {
  logs.push({
    message: `Log ${i}`,
    timestamp: new Date()
  })
}
db.logs.insertMany(logs)
```

**Gain de performance :** insertMany() peut √™tre **10 √† 100 fois plus rapide** !

### Quand Utiliser Quoi ?

**Utilisez `insertOne()` quand :**
- ‚úÖ Vous ins√©rez **un seul document**
- ‚úÖ Insertion **interactive** (action utilisateur)
- ‚úÖ Besoin de traiter **imm√©diatement** le r√©sultat

**Utilisez `insertMany()` quand :**
- ‚úÖ Vous ins√©rez **plusieurs documents** (2+)
- ‚úÖ Import de donn√©es en masse
- ‚úÖ G√©n√©ration de donn√©es de test
- ‚úÖ Migration de donn√©es
- ‚úÖ Performance critique

---

## Options d'Insertion

### Options de insertOne()

```javascript
db.collection.insertOne(document, {
  writeConcern: { w: 1 },      // Niveau de confirmation d'√©criture
  bypassDocumentValidation: false  // Ignorer la validation de sch√©ma
})
```

### Options de insertMany()

```javascript
db.collection.insertMany(documents, {
  ordered: true,                // Insertion ordonn√©e ou non
  writeConcern: { w: 1 },       // Niveau de confirmation
  bypassDocumentValidation: false  // Ignorer la validation
})
```

### Option : ordered (insertMany uniquement)

**ordered: true (par d√©faut)**

Insertion dans l'ordre. **S'arr√™te √† la premi√®re erreur.**

```javascript
db.produits.insertMany([
  { _id: 1, nom: "Produit A" },  // ‚úÖ Ins√©r√©
  { _id: 2, nom: "Produit B" },  // ‚úÖ Ins√©r√©
  { _id: 1, nom: "Produit C" },  // ‚ùå Erreur (doublon)
  { _id: 3, nom: "Produit D" }   // ‚è≠Ô∏è Pas ins√©r√© (arr√™t)
], { ordered: true })

// R√©sultat : Seulement A et B sont ins√©r√©s
```

**ordered: false**

Insertion non ordonn√©e. **Continue malgr√© les erreurs.**

```javascript
db.produits.insertMany([
  { _id: 1, nom: "Produit A" },  // ‚úÖ Ins√©r√©
  { _id: 2, nom: "Produit B" },  // ‚úÖ Ins√©r√©
  { _id: 1, nom: "Produit C" },  // ‚ùå Erreur (doublon)
  { _id: 3, nom: "Produit D" }   // ‚úÖ Ins√©r√© (continue !)
], { ordered: false })

// R√©sultat : A, B et D sont ins√©r√©s (C ignor√©)
```

**Quand utiliser ordered: false ?**
- ‚úÖ Import de donn√©es avec possibilit√© de doublons
- ‚úÖ Maximum d'insertions m√™me en cas d'erreur
- ‚úÖ Meilleure performance (parall√©lisation)

### Option : writeConcern

Contr√¥le le niveau de confirmation d'√©criture :

```javascript
// √âcriture confirm√©e par 1 n≈ìud (rapide, moins s√ªr)
db.logs.insertOne(
  { message: "Log" },
  { writeConcern: { w: 1 } }
)

// √âcriture confirm√©e par la majorit√© des n≈ìuds (plus s√ªr)
db.transactions.insertOne(
  { montant: 1000 },
  { writeConcern: { w: "majority" } }
)

// Avec timeout
db.documents.insertOne(
  { data: "important" },
  { writeConcern: { w: "majority", wtimeout: 5000 } }
)
```

**Valeurs de `w` :**
- `1` : Confirmation par le n≈ìud primaire (par d√©faut)
- `"majority"` : Confirmation par la majorit√© des n≈ìuds
- `<nombre>` : Confirmation par N n≈ìuds
- `0` : Pas de confirmation (fire and forget)

---

## Gestion des Erreurs

### Erreur : Doublon d'_id

```javascript
// Premi√®re insertion
db.produits.insertOne({
  _id: "PROD-001",
  nom: "Laptop"
})
// ‚úÖ Succ√®s

// Deuxi√®me insertion avec le m√™me _id
db.produits.insertOne({
  _id: "PROD-001",
  nom: "Autre produit"
})
// ‚ùå Erreur
```

**Message d'erreur :**
```
MongoServerError: E11000 duplicate key error collection:
boutique.produits index: _id_ dup key: { _id: "PROD-001" }
```

**Solution :**
- Utilisez des `_id` uniques
- Laissez MongoDB g√©n√©rer les `_id` automatiquement
- V√©rifiez l'existence avant d'ins√©rer

### Erreur : Validation de Sch√©ma

```javascript
// Collection avec validation
db.createCollection("utilisateurs", {
  validator: {
    $jsonSchema: {
      required: ["nom", "email"],
      properties: {
        nom: { bsonType: "string" },
        email: { bsonType: "string" }
      }
    }
  }
})

// ‚ùå √âchec : Champ manquant
db.utilisateurs.insertOne({
  nom: "Dupont"
  // Manque l'email requis
})
// Erreur : Document failed validation
```

### Gestion des Erreurs en JavaScript

```javascript
try {
  const resultat = db.produits.insertOne({
    _id: "PROD-001",
    nom: "Laptop",
    prix: 999.99
  })

  print("Document ins√©r√© avec l'ID : " + resultat.insertedId)

} catch (erreur) {
  if (erreur.code === 11000) {
    print("Erreur : Document avec cet _id existe d√©j√†")
  } else {
    print("Erreur lors de l'insertion : " + erreur.message)
  }
}
```

### Erreurs Courantes et Solutions

| Erreur | Code | Cause | Solution |
|--------|------|-------|----------|
| Duplicate key | 11000 | `_id` existe d√©j√† | Utiliser un `_id` unique |
| Validation failed | 121 | Document invalide | Corriger le document |
| Document too large | 10334 | > 16 Mo | R√©duire la taille ou utiliser GridFS |
| Write concern error | - | Probl√®me de r√©plication | V√©rifier le replica set |

---

## Cas d'Usage Pratiques

### Blog : Ins√©rer un Article

```javascript
use blog

db.articles.insertOne({
  titre: "Les 10 meilleurs frameworks JavaScript en 2024",
  slug: "10-meilleurs-frameworks-javascript-2024",
  auteur: {
    nom: "Marie Dupont",
    email: "marie@example.com",
    avatar: "https://example.com/avatars/marie.jpg"
  },
  contenu: "Dans cet article, nous allons explorer...",
  extrait: "D√©couvrez les frameworks JavaScript les plus populaires...",
  categorie: "D√©veloppement Web",
  tags: ["JavaScript", "Frameworks", "React", "Vue", "Angular"],
  datePublication: new Date("2024-01-15T09:00:00Z"),
  dateModification: new Date("2024-01-15T09:00:00Z"),
  publie: true,
  vues: 0,
  likes: 0,
  commentaires: [],
  seo: {
    metaTitre: "10 Meilleurs Frameworks JavaScript 2024",
    metaDescription: "D√©couvrez notre s√©lection des meilleurs frameworks...",
    motsCles: ["javascript", "frameworks", "2024"]
  }
})
```

### E-commerce : Ins√©rer des Produits

```javascript
use boutique

db.produits.insertMany([
  {
    reference: "LAPTOP-001",
    nom: "MacBook Pro 16\" M3",
    description: "Ordinateur portable haute performance",
    categorie: "Informatique",
    sousCategorie: "Laptops",
    marque: "Apple",
    prix: NumberDecimal("2799.00"),
    prixPromo: NumberDecimal("2499.00"),
    enPromotion: true,
    stock: 12,
    enStock: true,
    specifications: {
      processeur: "Apple M3 Pro",
      ram: "18 GB",
      stockage: "512 GB SSD",
      ecran: "16.2 pouces Liquid Retina XDR",
      poids: "2.14 kg"
    },
    images: [
      "https://cdn.example.com/macbook-1.jpg",
      "https://cdn.example.com/macbook-2.jpg",
      "https://cdn.example.com/macbook-3.jpg"
    ],
    notation: 4.8,
    nombreAvis: 127,
    dateAjout: new Date(),
    fournisseur: "Apple Inc."
  },
  {
    reference: "MOUSE-001",
    nom: "Logitech MX Master 3S",
    description: "Souris sans fil ergonomique",
    categorie: "Informatique",
    sousCategorie: "P√©riph√©riques",
    marque: "Logitech",
    prix: NumberDecimal("99.99"),
    prixPromo: null,
    enPromotion: false,
    stock: 45,
    enStock: true,
    specifications: {
      connexion: "Bluetooth, USB-C",
      dpi: "8000",
      boutons: 7,
      batterie: "70 jours"
    },
    images: [
      "https://cdn.example.com/mouse-1.jpg"
    ],
    notation: 4.9,
    nombreAvis: 342,
    dateAjout: new Date(),
    fournisseur: "Logitech"
  }
])
```

### Application de T√¢ches : Ins√©rer des T√¢ches

```javascript
use gestion_taches

// Ins√©rer une t√¢che
db.taches.insertOne({
  titre: "Impl√©menter l'authentification",
  description: "Mettre en place le syst√®me d'authentification avec JWT",
  priorite: "haute",
  statut: "a_faire",
  projet: ObjectId("507f191e810c19729de860ea"),
  assigneA: ObjectId("507f191e810c19729de860eb"),
  dateCreation: new Date(),
  dateEcheance: new Date("2024-12-15T17:00:00Z"),
  tags: ["backend", "s√©curit√©", "jwt"],
  estimationHeures: 8,
  heuresPassees: 0,
  sousT taches: [
    { titre: "Installer les d√©pendances", termine: false },
    { titre: "Cr√©er le middleware", termine: false },
    { titre: "Tester l'API", termine: false }
  ],
  commentaires: [],
  fichiers: []
})
```

### IoT : Ins√©rer des Donn√©es de Capteurs

```javascript
use iot

// Ins√©rer une lecture de capteur
db.mesures_temperature.insertOne({
  capteurId: "SENSOR-TEMP-001",
  emplacement: {
    batiment: "Entrep√¥t A",
    salle: "Zone de stockage 3",
    coordonnees: {
      latitude: 48.8566,
      longitude: 2.3522
    }
  },
  valeur: 22.5,
  unite: "celsius",
  humidite: 65.2,
  timestamp: new Date(),
  alertes: [],
  statut: "normal"
})

// Ins√©rer plusieurs lectures en lot
let lectures = []
for (let i = 0; i < 100; i++) {
  lectures.push({
    capteurId: "SENSOR-TEMP-001",
    valeur: 20 + Math.random() * 10,
    unite: "celsius",
    timestamp: new Date(Date.now() - i * 60000), // Toutes les minutes
    statut: "normal"
  })
}

db.mesures_temperature.insertMany(lectures)
```

### Logs d'Application

```javascript
use logs

db.logs_application.insertOne({
  niveau: "ERROR",
  message: "√âchec de connexion √† la base de donn√©es",
  timestamp: new Date(),
  service: "api-backend",
  serveur: "prod-server-01",
  environnement: "production",
  details: {
    erreur: "Connection timeout",
    code: "ETIMEDOUT",
    tentatives: 3
  },
  stackTrace: "Error: Connection timeout\n    at connect...",
  utilisateur: "system",
  ip: "192.168.1.100"
})
```

---

## Bonnes Pratiques

### ‚úÖ √Ä Faire

1. **Laissez MongoDB g√©n√©rer les _id**
   ```javascript
   // ‚úÖ Bon : _id automatique
   db.users.insertOne({ nom: "Dupont" })

   // ‚ö†Ô∏è Seulement si vous avez une vraie raison
   db.users.insertOne({ _id: "USER-001", nom: "Martin" })
   ```

2. **Utilisez insertMany() pour plusieurs documents**
   ```javascript
   // ‚ùå Inefficace
   for (let i = 0; i < 100; i++) {
     db.items.insertOne({ index: i })
   }

   // ‚úÖ Efficace
   let items = []
   for (let i = 0; i < 100; i++) {
     items.push({ index: i })
   }
   db.items.insertMany(items)
   ```

3. **Validez vos donn√©es avant insertion**
   ```javascript
   function insererUtilisateur(data) {
     // Validation
     if (!data.email || !data.nom) {
       throw new Error("Email et nom sont requis")
     }
     if (!data.email.includes("@")) {
       throw new Error("Email invalide")
     }

     // Insertion
     return db.utilisateurs.insertOne(data)
   }
   ```

4. **Utilisez des types appropri√©s**
   ```javascript
   // ‚úÖ Bon
   db.produits.insertOne({
     prix: NumberDecimal("19.99"),  // D√©cimal pour prix
     stock: 10,                      // Entier pour quantit√©
     dateAjout: new Date(),          // Date pour dates
     actif: true                     // Boolean pour statut
   })
   ```

5. **G√©rez les erreurs**
   ```javascript
   try {
     const resultat = db.collection.insertOne(document)
     print("Succ√®s : " + resultat.insertedId)
   } catch (e) {
     print("Erreur : " + e.message)
   }
   ```

6. **Documentez vos structures**
   ```javascript
   // ‚úÖ Bon : Structure coh√©rente et comment√©e
   db.articles.insertOne({
     // Identification
     _id: ObjectId(),
     slug: "mon-article",

     // Contenu
     titre: "Mon Article",
     contenu: "...",

     // M√©tadonn√©es
     auteur: ObjectId("..."),
     datePublication: new Date(),

     // Engagement
     vues: 0,
     likes: 0
   })
   ```

### ‚ùå √Ä √âviter

1. **Ins√©rer des documents incoh√©rents**
   ```javascript
   // ‚ùå Mauvais : Structures diff√©rentes
   db.users.insertOne({ nom: "Alice", age: 25 })
   db.users.insertOne({ name: "Bob", years: 30 })  // Champs diff√©rents !

   // ‚úÖ Bon : Structure coh√©rente
   db.users.insertMany([
     { nom: "Alice", age: 25 },
     { nom: "Bob", age: 30 }
   ])
   ```

2. **Ins√©rer des documents trop gros**
   ```javascript
   // ‚ùå √âvitez les documents > 16 Mo
   db.files.insertOne({
     nom: "video.mp4",
     contenu: "base64 de 50 Mo..."  // Erreur !
   })

   // ‚úÖ Utilisez GridFS pour les gros fichiers
   ```

3. **Oublier la gestion d'erreurs**
   ```javascript
   // ‚ùå Dangereux en production
   db.users.insertOne({ email: userInput })

   // ‚úÖ Avec gestion d'erreur
   try {
     db.users.insertOne({ email: userInput })
   } catch (e) {
     handleError(e)
   }
   ```

4. **Ins√©rer sans validation**
   ```javascript
   // ‚ùå Accepte n'importe quoi
   db.users.insertOne(req.body)

   // ‚úÖ Valide d'abord
   if (isValid(req.body)) {
     db.users.insertOne(req.body)
   }
   ```

---

## Performance et Optimisation

### Batch Size Optimal

**Pour insertMany(), divisez en lots si > 1000 documents :**

```javascript
// ‚úÖ Pour des insertions massives
function insererParLots(collection, documents, tailleLot = 1000) {
  for (let i = 0; i < documents.length; i += tailleLot) {
    const lot = documents.slice(i, i + tailleLot)
    collection.insertMany(lot, { ordered: false })
  }
}

// Utilisation
let documents = []  // 100,000 documents
for (let i = 0; i < 100000; i++) {
  documents.push({ index: i, data: "..." })
}

insererParLots(db.items, documents)
```

### Insertion Parall√®le

```javascript
// Pour des performances maximales avec ordered: false
db.logs.insertMany(documents, {
  ordered: false,  // Permet la parall√©lisation
  writeConcern: { w: 1 }  // Confirmation rapide
})
```

### Index et Performance

**Les index ralentissent l'insertion :**

```javascript
// Si vous avez beaucoup d'insertions √† faire :

// 1. Supprimer les index (sauf _id)
db.collection.dropIndex("nom_1")
db.collection.dropIndex("email_1")

// 2. Ins√©rer les documents
db.collection.insertMany(documents)

// 3. Recr√©er les index
db.collection.createIndex({ nom: 1 })
db.collection.createIndex({ email: 1 })
```

---

## Comparaison avec SQL

### SQL INSERT

```sql
-- Un seul enregistrement
INSERT INTO utilisateurs (nom, email, age)
VALUES ('Dupont', 'dupont@example.com', 30);

-- Plusieurs enregistrements
INSERT INTO utilisateurs (nom, email, age)
VALUES
  ('Dupont', 'dupont@example.com', 30),
  ('Martin', 'martin@example.com', 25),
  ('Bernard', 'bernard@example.com', 35);
```

### MongoDB INSERT

```javascript
// Un seul document
db.utilisateurs.insertOne({
  nom: "Dupont",
  email: "dupont@example.com",
  age: 30
})

// Plusieurs documents
db.utilisateurs.insertMany([
  { nom: "Dupont", email: "dupont@example.com", age: 30 },
  { nom: "Martin", email: "martin@example.com", age: 25 },
  { nom: "Bernard", email: "bernard@example.com", age: 35 }
])
```

**Avantages MongoDB :**
- ‚úÖ Syntaxe plus simple
- ‚úÖ Pas besoin de d√©finir un sch√©ma au pr√©alable
- ‚úÖ Support natif des objets imbriqu√©s
- ‚úÖ Support natif des tableaux
- ‚úÖ Types de donn√©es riches (Date, ObjectId, etc.)

---

## Points Cl√©s √† Retenir

### ‚úÖ Essentiel

1. **insertOne()** : Ins√©rer un seul document
2. **insertMany()** : Ins√©rer plusieurs documents (plus performant)
3. **_id automatique** : MongoDB g√©n√®re un ObjectId unique
4. **Retour de l'op√©ration** : Contient l'_id ou les _id ins√©r√©s
5. **Gestion d'erreurs** : Toujours g√©rer les doublons et validations

### üéØ Syntaxe √† Retenir

```javascript
// Insertion simple
db.collection.insertOne({ champ: "valeur" })

// Insertion multiple
db.collection.insertMany([
  { champ: "valeur1" },
  { champ: "valeur2" }
])

// Avec options
db.collection.insertMany(documents, {
  ordered: false,
  writeConcern: { w: "majority" }
})
```

### ‚ö†Ô∏è Erreurs Courantes

- Doublon d'`_id` ‚Üí Erreur E11000
- Document > 16 Mo ‚Üí Erreur 10334
- Validation √©chou√©e ‚Üí Erreur 121
- Toujours g√©rer ces erreurs avec try/catch

---

## Prochaines √âtapes

Maintenant que vous savez ins√©rer des documents, apprenons √† les rechercher :

‚û°Ô∏è **2.5.2 find() et findOne()** : Rechercher et interroger vos documents

L'insertion est la premi√®re √©tape du cycle CRUD. Ma√Ætrisez-la bien !

---

## Ressources Compl√©mentaires

### Documentation Officielle

- [insertOne() - MongoDB Manual](https://docs.mongodb.com/manual/reference/method/db.collection.insertOne/)
- [insertMany() - MongoDB Manual](https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/)
- [Write Concern](https://docs.mongodb.com/manual/reference/write-concern/)

### Pour Aller Plus Loin

- Bulk operations pour des insertions massives optimis√©es
- Transactions multi-documents pour garantir l'atomicit√©
- Validation de sch√©ma pour assurer la coh√©rence

---


‚è≠Ô∏è [find() et findOne()](/02-fondamentaux-de-mongodb/05.2-find.md)
